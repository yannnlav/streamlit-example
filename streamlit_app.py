import streamlit as st
import openai
import os

openai.api_key = st.secrets["OPENAI_API_KEY"]

def ask_question(questions):
    prompt = f"Q: {question}\nA:"
    response = openai.Completion.create(
        engine="text-davinci-003", 
        prompt=prompt,
        max_tokens=1024,
        n=1,
        stop=None,
        temperature=0.5,
    )
    answer = response.choices[0].text.strip()
    return answer

print("Welcome to the company! Below are the frequently asked questions with their corresponding answers generated by openAI.")
print("If you wish to ask another question, you can type it at the user prompt below.")

# Print common questions and their answers
question = "What are the work hours?"
answer = ask_question(question)
print(f"\nQ: {question}\nA: {answer}")

question = "What are the company policies regarding sick leave?"
answer = ask_question(question)
print(f"\nQ: {question}\nA: {answer}")

question = "What is the dress code?"
answer = ask_question(question)
print(f"\nQ: {question}\nA: {answer}")

question = "What are the benefits offered by the company?"
answer = ask_question(question)
print(f"\nQ: {question}\nA: {answer}")

question = "Who do I contact if I have a question or concern?"
answer = ask_question(question)
print(f"\nQ: {question}\nA: {answer}")

question = "How often do performance evaluations occur?"
answer = ask_question(question)
print(f"\nQ: {question}\nA: {answer}")


# Prompt the user whether to ask a question or quit the chatbot
while True:
    question = input("\nEnter another question or type 'quit' to exit: \nInput: ")
    if question == "quit":
        print("\nExiting the program...\nThank you for using the chatbot. Good bye!")
        break
    else:
        answer = ask_question(question)
        print(f"A: {answer}")
