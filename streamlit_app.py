import streamlit as st
import openai
import os

openai.api_key = os.getenv("OPENAI_API_KEY")

def ask_question(question):
    prompt = f"Q: {question}\nA:"
    response = openai.Completion.create(
        engine="text-davinci-003", 
        prompt=prompt,
        max_tokens=1024,
        n=1,
        stop=None,
        temperature=0.5,
    )
    answer = response.choices[0].text.strip()
    return answer

def main():
    st.title("OpenAI Chatbot")
    st.write("Welcome to the company! Below are the frequently asked questions with their corresponding answers generated by OpenAI.")
    
    # Print common questions and their answers
    questions = {
        "What are the work hours?": "",
        "What are the company policies regarding sick leave?": "",
        "What is the dress code?": "",
        "What are the benefits offered by the company?": "",
        "Who do I contact if I have a question or concern?": "",
        "How often do performance evaluations occur?": ""
    }
    
    for question in questions:
        answer = ask_question(question)
        questions[question] = answer
        st.write(f"\nQ: {question}\nA: {answer}")
    
    # Prompt the user whether to ask a question or quit the chatbot
    st.write("\nIf you wish to ask another question, you can type it below:")
    while True:
        question = st.text_input("Enter a question or type 'quit' to exit:")
        if question == "quit":
            st.write("\nExiting the program... Thank you for using the chatbot. Goodbye!")
            break
        elif not question:
            st.warning("Please enter a question.")
        else:
            answer = ask_question(question)
            st.success(f"A: {answer}")

if __name__ == "__main__":
    main()
