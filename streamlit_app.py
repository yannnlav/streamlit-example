import streamlit as st
import openai
import os

openai.api_key = os.getenv("OPENAI_API_KEY")

def ask_question(question):
    prompt = f"Q: {question}\nA:"
    response = openai.Completion.create(
        engine="text-davinci-003",
        prompt=prompt,
        max_tokens=1024,
        n=1,
        stop=None,
        temperature=0.5,
    )
    answer = response.choices[0].text.strip()
    return answer

def main():
    st.title("Company FAQs")
    st.write("Welcome to the company! Below are the frequently asked questions with their corresponding answers generated by OpenAI.")
    
    # Print common questions and their answers
    question1 = "What are the work hours?"
    answer1 = ask_question(question1)
    st.write(f"Q: {question1}")
    st.write(f"A: {answer1}")

    question2 = "What are the company policies regarding sick leave?"
    answer2 = ask_question(question2)
    st.write(f"Q: {question2}")
    st.write(f"A: {answer2}")

    question3 = "What is the dress code?"
    answer3 = ask_question(question3)
    st.write(f"Q: {question3}")
    st.write(f"A: {answer3}")

    question4 = "What are the benefits offered by the company?"
    answer4 = ask_question(question4)
    st.write(f"Q: {question4}")
    st.write(f"A: {answer4}")

    question5 = "Who do I contact if I have a question or concern?"
    answer5 = ask_question(question5)
    st.write(f"Q: {question5}")
    st.write(f"A: {answer5}")

    question6 = "How often do performance evaluations occur?"
    answer6 = ask_question(question6)
    st.write(f"Q: {question6}")
    st.write(f"A: {answer6}")

    # Prompt the user whether to ask a question or quit the chatbot
    while True:
        question = st.text_input("Enter a question or type 'quit' to exit:")
        if question == "quit":
            st.write("Exiting the program... Thank you for using the chatbot. Good bye!")
            break
        else:
            answer = ask_question(question)
            st.write(f"A: {answer}")

if __name__ == "__main__":
    main()
